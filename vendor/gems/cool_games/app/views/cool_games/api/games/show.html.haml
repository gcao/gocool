%h3
%script#game_name_tmpl(type='text/html')
  <h3>
  Game <%= id %>: 
  <%= black_name %><% if (black_rank) { %>(<%= black_rank %>) <% } %>
  vs
  <%= white_name %><% if (white_rank) { %>(<%= white_rank %>) <% } %>
  </h3>

#gameContainer

:coffeescript
  id = "#{params[:id]}"
  url = urls.api.games + "/" + id + ".json"
  if server2js.auth_token then url = url + "?auth_token=" + server2js.auth_token

  $.ajax url,
    dataType: 'jsonp'
    crossDomain: true
    success: (response) ->
      handleResponse response,
        before: -> console.log url
        callback: -> showGame(response.body)

- content_for :footer do
  = render "cool_games/shared/jsgameviewer"
  = javascript_include_tag "cool_games/jsgameviewer_ext"

