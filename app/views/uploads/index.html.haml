%h1= @page_header || t('uploads.page_header')

%form.bp(action="/uploads" name="uploadForm" enctype="multipart/form-data" method="post")
  %fieldset.span-18
    = show_flash 'span-18'
    .form_row.span-18
      .span-3
        %label(for="upload_email")
          %span.required_field *
          = t('email.label')
      #email_container.span-15.last
        -if show_masked_email?
          %span#upload_masked_email.email_edit
            = masked_email
            %span.note
              = t('form.click_to_change')
        -else
          %input#upload_email(type="text" name="upload[email]" maxlength="60" size="60"){:value => @email}

    .form_row.span-18
      .span-3
        %label(for="upload_upload")
          %span.required_field *
          = t('uploads.file_label')
      .span-15.last
        #file_fields
          %input#upload_upload(type="file" name="upload[upload]" size="60")

    %hr.space
    .span-14{:align => 'center'}
      %input.upload_submit(type="submit" name="commit"){:value => t('uploads.submit_button')}
      %input(type="reset" id="resetButton"){:value => t('form.reset_button')}
    
    .form_legend.span-18
      %span
        %span.required_field *
        = t('form.marked_required')

- content_for :footer do
  = javascript_include_tag "upload"
  = javascript_include_tag "validanguage_uncompressed"
  :javascript
    validanguage.el.upload_email = {
      validations: [
        {
          name: validanguage.validateRequired,
          errorMsg: "#{t('email.required')}",
        },
        {
          name: validanguage.validateEmail,
          errorMsg: "#{t('email.invalid')}"
        }
      ]
    };
    validanguage.el.upload_upload = {
      required: true,
      errorMsg: "#{t('uploads.file_required')}"
    };
